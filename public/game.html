<!DOCTYPE html>
<html>
    <head>
        <script>
            // CONSTANTS
            FRAMERATE = 60;
            GRAVITY = 0.01;
            // VARIABLES
            fishSpeed = 0.1;
            captureProgress = 0;
            fishZone = {
                y : 0,
                dy : 2,
                h : 5
            }
            captureZone = {
                y : 0,
                dy : 2,
                h : 10
            }
            
            function init() {
                setInterval(gameloop,1000/FRAMERATE);
            }
            function gameloop() {
                updatePhysics();
                updateHTML();
            }

            function updatePhysics() {
                fishZone.dy += Math.random() *fishSpeed;
                fishZone.dy -= Math.random() *fishSpeed;
                fishZone.y += fishZone.dy;
                if (fishZone.y + fishZone.h > 100) {
                    fishZone.y = 100 - fishZone.h;
                    fishZone.dy *= -0.3;
                }
                if (fishZone.y < 0) {
                    fishZone.y = 0;
                    fishZone.dy *= -0.3;
                }

                captureZone.dy -= GRAVITY;
                captureZone.y += captureZone.dy;
                if (captureZone.y + captureZone.h > 100) {
                    captureZone.y = 100 - captureZone.h;
                    captureZone.dy *= -0.5;
                }
                if (captureZone.y < 0) {
                    captureZone.y = 0;
                    captureZone.dy *= -0.5;
                }

                if (
                    fishZone.y > captureZone.y &&
                    fishZone.y + fishZone.h < captureZone.y + captureZone.h
                ) {
                    captureProgress+=0.1;
                    document.getElementById("captureProgress").style = "background-color: green;";
                } else {
                    document.getElementById("captureProgress").style = "background-color: blue;";
                }
            }

            function updateHTML() {
                fishZoneElement = document.getElementById("fishZone");
                fishZoneElement.style.bottom = fishZone.y + "%";
                fishZoneElement.style.height = fishZone.h + "%";

                captureZoneElement = document.getElementById("captureZone");
                captureZoneElement.style.bottom = captureZone.y + "%";
                captureZoneElement.style.height = captureZone.h + "%";

                captureProgressElement = document.getElementById("captureProgress");
                captureProgressElement.style.height = captureProgress + "%";
            }

            function reel(event) {
                event.preventDefault(event);
                captureZone.dy += 1;
            }
        </script>
        <style>
            body {
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100vh;
                margin: 0;
            }
            .container {
                display: flex;
                width: 300px; /* Adjust as needed */
                height: 600px; /* Adjust as needed */
                border: 1px solid #ccc;
            }
            .chart-container {
                flex: 1;
                display: flex;
                justify-content: center;
                align-items: center;
                border: 1px solid #ccc;
            }
            .bar-chart {
                width: 50px; /* Adjust bar width */
                height: 80%; /* Adjust bar height */
                background-color: lightblue;
                border: 1px solid blue;
                display: flex;
                align-items: center;
                justify-content: flex-end;
                flex-direction: column;
            }
            .bar-fill {
                width: 100%; /* Changed to 100% */
                /* height set inline */
                background-color: blue;
            }
            .rect-container {
            flex:1;
            position: relative; /* Important for positioning the bar and rectangle */
            border: 1px solid black;
            }
            .rect {
                width: 100%;
                height: 100px;
                background-color: red;
                position: absolute;
                display: flex;
                justify-content: center; /* Centers horizontally */
                align-items: center; /* Centers vertically */
                left: 0px; /* Position relative to the bar */
                bottom: 80px; /* Initial position at the top */
            }
        </style>
    </head>
    <body onload="init()">
        <div class="container" onmousedown="reel(event);">
            <div class="rect-container", style="flex: 1; display: flex; justify-content: center; align-items: center; border: 1px solid #ccc;">
                <div class="rect", id="captureZone"></div>
                <div class="rect", id="fishZone", style="bottom:500px; background-color: transparent;">
                    <img src="fish.png", style="width: 50%;">
                </div>
            </div>
            <div class="chart-container">
                <bar class="bar-chart">
                    <bar id="captureProgress", class="bar-fill" style="height:30%;"></bar>
                </bar>
            </div>
        </div>
    </body>
</html>

